{"version":3,"sources":["webpack:///./src/views/DocBrowse.vue?b769","webpack:///src/views/DocBrowse.vue","webpack:///./src/views/DocBrowse.vue?1396","webpack:///./src/views/DocBrowse.vue","webpack:///./src/views/DocBrowse.vue?c9f6"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","doc","docName","auth","edit","on","toEdit","_e","share","admin","show","showSettings","$event","updateSettings","model","value","setting","callback","$$v","$set","expression","teamId","slot","view","commitAuth","staticStyle","ownerName","createTime","updateTime","count","showContent","content","_l","c","key","id","toString","avatar","name","time","$store","state","username","ref","toolbars","imgAdd","change","commitComment","staticRenderFns","data","lock","comment","newComment","ctl1","ctl2","te","tv","bold","italic","header","underline","strikethrough","mark","superscript","subscript","quote","ol","ul","link","imagelink","code","table","fullscreen","readmodel","htmlcode","help","undo","redo","trash","save","navigation","alignleft","aligncenter","alignright","subfield","preview","methods","disableSubmit","$alert","$router","push","path","query","beforeUpload","checkFileType","$message","error","checkFileSize","file","policy","scope","bucketName","deadline","token","form","append","$vm","$img2Url","pos","$route","docId","go","console","log","userId","did","mounted","res","result","d","confirmButtonText","component"],"mappings":"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","file":"js/chunk-97dc81f0.85e606d5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.showContent)?_c('el-main',[_c('el-row',[_c('el-col',{attrs:{\"span\":8,\"offset\":6}},[_c('div',{staticClass:\"tt\"},[_vm._v(_vm._s(_vm.doc.docName))])]),_c('el-col',{attrs:{\"span\":5,\"offset\":0}},[(_vm.auth.edit===true)?_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-edit-outline\",\"circle\":\"\",\"plain\":\"\"},on:{\"click\":_vm.toEdit}}):_vm._e(),_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-share\",\"circle\":\"\",\"plain\":\"\"},on:{\"click\":_vm.share}}),(_vm.auth.admin===true)?_c('el-button',{attrs:{\"type\":\"info\",\"icon\":\"el-icon-setting\",\"circle\":\"\",\"plain\":\"\"},on:{\"click\":_vm.show}}):_vm._e()],1)],1),_c('p'),_c('el-dialog',{attrs:{\"modal\":false,\"visible\":_vm.showSettings,\"title\":\"管理文档权限\",\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.showSettings=$event}}},[_c('p',{attrs:{\"align\":\"left\"}},[_c('span',[_c('h4',[_vm._v(\"编辑:\")])]),(_vm.showSettings)?_c('el-radio-group',{on:{\"change\":_vm.updateSettings},model:{value:(_vm.setting.edit),callback:function ($$v) {_vm.$set(_vm.setting, \"edit\", $$v)},expression:\"setting.edit\"}},[_c('el-radio',{attrs:{\"label\":\"0\"}},[_vm._v(\"仅创建者\")]),(this.teamId!='-1')?_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"仅团队内\")]):_vm._e(),_c('el-radio',{attrs:{\"label\":\"2\"}},[_vm._v(\"所有人\")])],1):_vm._e()],1),_c('p',{attrs:{\"align\":\"left\"}},[_c('span',[_c('h4',[_vm._v(\"浏览:\")])]),(_vm.showSettings)?_c('el-radio-group',{model:{value:(_vm.setting.view),callback:function ($$v) {_vm.$set(_vm.setting, \"view\", $$v)},expression:\"setting.view\"}},[_c('el-radio',{attrs:{\"disabled\":this.setting.edit==='2',\"label\":\"0\"}},[_vm._v(_vm._s(_vm.teamId!='-1'?'仅团队内':'仅创建者'))]),_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"所有人\")])],1):_vm._e()],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"success\",\"circle\":\"\",\"plain\":\"\",\"icon\":\"el-icon-check\",\"disabled\":this.setting.edit===''||this.setting.view===''},on:{\"click\":_vm.commitAuth}})],1)]),_c('el-row',{staticStyle:{\"width\":\"75%\",\"margin\":\"auto auto\"}},[_c('el-col',{attrs:{\"span\":3,\"offset\":4}},[_c('div',{staticClass:\"info info-left\"},[_vm._v(\"创建者：\"+_vm._s(_vm.doc.ownerName))])]),_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"info info-left\"},[_vm._v(\"创建时间：\"+_vm._s(_vm.doc.createTime))])]),_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"info info-right\"},[_vm._v(\"上次修改时间：\"+_vm._s(_vm.doc.updateTime))])]),_c('el-col',{attrs:{\"span\":3,\"offset\":0}},[_c('div',{staticClass:\"info info-right\"},[_vm._v(\"历史修改次数：\"+_vm._s(_vm.doc.count))])])],1),_c('div',{staticStyle:{\"width\":\"50%\",\"margin\":\"auto auto\"}},[_c('el-divider')],1),(this.showContent===true)?_c('el-row',[_c('el-col',{attrs:{\"span\":12,\"offset\":6}},[_c('mavon-editor',{staticStyle:{\"min-height\":\"800px\"},attrs:{\"value\":_vm.doc.content,\"subfield\":false,\"defaultOpen\":\"preview\",\"toolbarsFlag\":false,\"editable\":false,\"scrollStyle\":true,\"ishljs\":true,\"previewBackground\":\"#ffffff\"}})],1)],1):_vm._e(),_c('p',{staticStyle:{\"width\":\"50%\",\"margin\":\"auto auto\"}},[_c('el-divider')],1),_vm._l((_vm.comment),function(c){return _c('p',{key:c},[_c('el-row',[_c('el-col',{staticClass:\"comment-info\",attrs:{\"span\":1,\"offset\":6}},[_c('el-link',{attrs:{\"underline\":false,\"href\":'http://60.205.189.66:8080/userInfo?userId='+c.id.toString()}},[_c('el-avatar',{attrs:{\"src\":c.avatar,\"size\":30,\"fit\":\"fill\"}},[_vm._v(_vm._s(c.name))])],1)],1),_c('el-col',{staticClass:\"comment-info\",attrs:{\"span\":6}},[_c('el-row',[_c('el-link',{staticClass:\"comment-name\",attrs:{\"underline\":false,\"href\":'http://60.205.189.66:8080/userInfo?userId='+c.id.toString()}},[_c('div',[_vm._v(_vm._s(c.name))])])],1),_c('el-row',[_c('div',{staticClass:\"comment-name\",staticStyle:{\"font-size\":\"60%\",\"color\":\"#888888\"}},[_vm._v(_vm._s(c.time))])])],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":12,\"offset\":6}},[_c('div',[_c('mavon-editor',{staticStyle:{\"min-height\":\"30px\",\"box-shadow\":\"0 0px 0px 0 rgba(0, 0, 0, 0.1)\"},attrs:{\"value\":c.content,\"subfield\":false,\"defaultOpen\":\"preview\",\"toolbarsFlag\":false,\"editable\":false,\"scrollStyle\":true,\"ishljs\":true,\"previewBackground\":\"#F5F5F5\"}})],1)])],1)],1)}),_c('el-row',[_c('el-col',{staticClass:\"comment-info\",attrs:{\"span\":1,\"offset\":6}},[_c('el-avatar',{attrs:{\"src\":this.$store.state.avatar,\"size\":30,\"fit\":\"fill\"}},[_vm._v(_vm._s(this.$store.state.username))])],1),_c('el-col',{staticClass:\"comment-info\",attrs:{\"span\":2}},[_c('el-row',[_c('div',{staticClass:\"comment-name\"},[_vm._v(_vm._s(this.$store.state.username))])]),_c('el-row',[_c('div',{staticClass:\"comment-name\"})])],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":12,\"offset\":6}},[_c('div',[_c('mavon-editor',{ref:\"editor\",staticStyle:{\"min-height\":\"250px\",\"border-width\":\"1px\",\"border-color\":\"#E6E6E6\",\"border-style\":\"solid\",\"box-shadow\":\"0 0 0 0 rgba(0, 0, 0, 0.1)\"},attrs:{\"toolbars\":_vm.toolbars,\"subfield\":false,\"defaultOpen\":\"edit\",\"toolbarsFlag\":true,\"editable\":true,\"scrollStyle\":true,\"ishljs\":true,\"autofocus\":false,\"placeholder\":\"说两句呗\",\"previewBackground\":\"#ffffff\"},on:{\"imgAdd\":_vm.imgAdd,\"change\":_vm.change}})],1)])],1),_c('p'),_c('el-row',[_c('el-col',{staticClass:\"info-right\",attrs:{\"span\":14,\"offset\":6}},[_c('el-button',{attrs:{\"type\":\"success\",\"plain\":\"\"},on:{\"click\":_vm.commitComment}},[_vm._v(\"发表评论\")])],1)],1)],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-main v-if=\"showContent\">\n    <!--Title-->\n    <el-row>\n      <el-col :span=\"8\" :offset=\"6\">\n        <div class=\"tt\">{{doc.docName}}</div>\n        <!--<div class=\"tt\">一二三四五六七八九十一二三四五六</div>-->\n      </el-col>\n      <el-col :span=\"5\" :offset=\"0\">\n        <el-button\n          v-if=\"auth.edit===true\"\n          type=\"success\"\n          icon=\"el-icon-edit-outline\"\n          circle\n          plain\n          @click=\"toEdit\"\n        ></el-button>\n        <!--edit-->\n        <el-button type=\"warning\" icon=\"el-icon-share\" circle plain @click=\"share\"></el-button>\n        <!--share todo-->\n        <el-button\n          v-if=\"auth.admin===true\"\n          type=\"info\"\n          icon=\"el-icon-setting\"\n          circle\n          plain\n          @click=\"show\"\n        ></el-button>\n      </el-col>\n    </el-row>\n    <p></p>\n    <!--Settings of auth-->\n    <!-- 改不动 -->\n    <!--\n    <div v-if=\"showSettings\">\n      <el-row style=\"width: 70%;margin: auto auto;\">\n        <el-col :span=\"8\" :offset=\"3\">\n          编辑权限：\n          <el-radio-group v-if=\"showSettings\" v-model=\"setting.edit\" @change=\"updateSettings\">\n            <el-radio label=\"0\">仅创建者</el-radio>\n            <el-radio label=\"1\">仅团队内</el-radio>\n            <el-radio label=\"2\">所有人</el-radio>\n          </el-radio-group>\n        </el-col>\n        <el-col :span=\"8\" :offset=\"0\">\n          查看、分享、评论权限：\n          <el-radio-group v-if=\"showSettings\" v-model=\"setting.view\">\n            <el-radio :disabled=\"this.setting.edit==='2'\" label=\"0\">仅团队内</el-radio>\n            <el-radio label=\"1\">所有人</el-radio>\n          </el-radio-group>\n        </el-col>\n      </el-row>\n      <p></p>\n      <el-row>\n        <el-col :span=\"13\" :offset=\"6\" class=\"info-right\">\n          <el-button\n            type=\"success\"\n            circle\n            plain\n            icon=\"el-icon-check\"\n            :disabled=\"this.setting.edit===''||this.setting.view===''\"\n            @click=\"commitAuth\"\n          ></el-button>\n        </el-col>\n      </el-row>\n    </div>-->\n    <el-dialog :modal=\"false\" :visible.sync=\"showSettings\" title=\"管理文档权限\" width=\"400px\">\n      <p align=\"left\">\n        <span>\n          <h4>编辑:</h4>\n        </span>\n        <el-radio-group v-if=\"showSettings\" v-model=\"setting.edit\" @change=\"updateSettings\">\n          <el-radio label=\"0\">仅创建者</el-radio>\n          <el-radio label=\"1\" v-if=\"this.teamId!='-1'\">仅团队内</el-radio>\n          <el-radio label=\"2\">所有人</el-radio>\n        </el-radio-group>\n      </p>\n      <p align=\"left\">\n        <span>\n          <h4>浏览:</h4>\n        </span>\n        <el-radio-group v-if=\"showSettings\" v-model=\"setting.view\">\n          <el-radio :disabled=\"this.setting.edit==='2'\" label=\"0\">{{teamId!='-1'?'仅团队内':'仅创建者'}}</el-radio>\n          <el-radio label=\"1\">所有人</el-radio>\n        </el-radio-group>\n      </p>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          type=\"success\"\n          circle\n          plain\n          icon=\"el-icon-check\"\n          :disabled=\"this.setting.edit===''||this.setting.view===''\"\n          @click=\"commitAuth\"\n        ></el-button>\n      </div>\n    </el-dialog>\n    <!--Info-->\n    <el-row style=\"width: 75%;margin: auto auto\">\n      <!--todo 优化显示-->\n      <el-col :span=\"3\" :offset=\"4\">\n        <div class=\"info info-left\">创建者：{{doc.ownerName}}</div>\n      </el-col>\n      <el-col :span=\"5\">\n        <div class=\"info info-left\">创建时间：{{doc.createTime}}</div>\n      </el-col>\n      <el-col :span=\"5\">\n        <div class=\"info info-right\">上次修改时间：{{doc.updateTime}}</div>\n      </el-col>\n      <el-col :span=\"3\" :offset=\"0\">\n        <div class=\"info info-right\">历史修改次数：{{doc.count}}</div>\n      </el-col>\n    </el-row>\n    <!--Content-->\n    <div style=\"width: 50%;margin: auto auto\">\n      <el-divider></el-divider>\n    </div>\n    <el-row v-if=\"this.showContent===true\">\n      <el-col :span=\"12\" :offset=\"6\">\n        <mavon-editor\n          :value=\"doc.content\"\n          :subfield=\"false\"\n          defaultOpen=\"preview\"\n          :toolbarsFlag=\"false\"\n          :editable=\"false\"\n          :scrollStyle=\"true\"\n          :ishljs=\"true\"\n          previewBackground=\"#ffffff\"\n          style=\"min-height: 800px;\"\n        ></mavon-editor>\n        <!-- #e9ece5 -->\n      </el-col>\n    </el-row>\n    <!--Comment-->\n    <p style=\"width: 50%;margin: auto auto;\">\n      <el-divider></el-divider>\n    </p>\n    <p v-for=\"(c) in comment\" v-bind:key=\"c\">\n      <el-row>\n        <el-col :span=\"1\" :offset=\"6\" class=\"comment-info\">\n          <el-link\n            :underline=\"false\"\n            :href=\"'http://60.205.189.66:8080/userInfo?userId='+c.id.toString()\"\n          >\n            <el-avatar :src=\"c.avatar\" :size=\"30\" fit=\"fill\">{{c.name}}</el-avatar>\n          </el-link>\n        </el-col>\n        <el-col :span=\"6\" class=\"comment-info\">\n          <el-row>\n            <el-link\n              class=\"comment-name\"\n              :underline=\"false\"\n              :href=\"'http://60.205.189.66:8080/userInfo?userId='+c.id.toString()\"\n            >\n              <div>{{c.name}}</div>\n            </el-link>\n          </el-row>\n          <el-row>\n            <div class=\"comment-name\" style=\"font-size: 60%;color:#888888;\">{{c.time}}</div>\n          </el-row>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"12\" :offset=\"6\">\n          <div>\n            <mavon-editor\n              style=\"min-height: 30px;box-shadow: 0 0px 0px 0 rgba(0, 0, 0, 0.1)\"\n              :value=\"c.content\"\n              :subfield=\"false\"\n              defaultOpen=\"preview\"\n              :toolbarsFlag=\"false\"\n              :editable=\"false\"\n              :scrollStyle=\"true\"\n              :ishljs=\"true\"\n              previewBackground=\"#F5F5F5\"\n            ></mavon-editor>\n            <!-- style=\"background:#F5F5F5;\" -->\n            <!-- #eeffff -->\n          </div>\n        </el-col>\n      </el-row>\n    </p>\n    <!--Add Comment-->\n    <el-row>\n      <el-col :span=\"1\" :offset=\"6\" class=\"comment-info\">\n        <el-avatar\n          :src=\"this.$store.state.avatar\"\n          :size=\"30\"\n          fit=\"fill\"\n        >{{this.$store.state.username}}</el-avatar>\n      </el-col>\n      <el-col :span=\"2\" class=\"comment-info\">\n        <el-row>\n          <div class=\"comment-name\">{{this.$store.state.username}}</div>\n        </el-row>\n        <el-row>\n          <div class=\"comment-name\">\n            <!--空着-->\n          </div>\n        </el-row>\n      </el-col>\n    </el-row>\n    <el-row>\n      <el-col :span=\"12\" :offset=\"6\">\n        <div>\n          <mavon-editor\n            ref=\"editor\"\n            :toolbars=\"toolbars\"\n            style=\"min-height: 250px;border-width:1px;border-color:#E6E6E6;border-style: solid;box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.1);\"\n            :subfield=\"false\"\n            defaultOpen=\"edit\"\n            :toolbarsFlag=\"true\"\n            :editable=\"true\"\n            :scrollStyle=\"true\"\n            :ishljs=\"true\"\n            :autofocus=\"false\"\n            placeholder=\"说两句呗\"\n            previewBackground=\"#ffffff\"\n            @imgAdd=\"imgAdd\"\n            @change=\"change\"\n          ></mavon-editor>\n        </div>\n      </el-col>\n    </el-row>\n    <p></p>\n    <el-row>\n      <el-col :span=\"14\" :offset=\"6\" class=\"info-right\">\n        <el-button type=\"success\" plain @click=\"commitComment\">发表评论</el-button>\n      </el-col>\n    </el-row>\n  </el-main>\n</template>\n<script>\nimport {\n  AuthorizeFile,\n  CommitComment,\n  GetAuth,\n  GetComment,\n  GetFile,\n  GetUserInfo,\n} from \"../main\";\nimport { genToken } from \"../genToken\";\nimport random from \"string-random\";\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      teamId: \"1\",\n      doc: {\n        ownerName: \"\",\n        content: \"\",\n        count: \"\",\n        createTime: \"\",\n        updateTime: \"\",\n        docName: \"\",\n      },\n      auth: {\n        view: false,\n        admin: false,\n        edit: false,\n        lock: false,\n      },\n      showContent: false,\n      //showContent: true,\n      comment: [\n        // {\n        //   time: \"2020-08-14 11:45\",\n        //   name: \"www\",\n        //   content: \"123\",\n        //   avatar: \"https://ftp.bmp.ovh/imgs/2020/08/182a2651f9696ab4.png\",\n        // },\n        // {\n        //   time: \"2020-08-14 11:45\",\n        //   name: \"ss\",\n        //   content: \"ff\",\n        //   avatar: \"https://ftp.bmp.ovh/imgs/2020/08/182a2651f9696ab4.png\",\n        // },\n      ],\n      newComment: \"\",\n      showSettings: false,\n      //showSettings: true,\n      setting: {\n        edit: \"\",\n        view: \"\",\n        ctl1: true,\n        ctl2: true,\n        te: \"\",\n        tv: \"\",\n      },\n      toolbars: {\n        bold: true, // 粗体\n        italic: true, // 斜体\n        header: true, // 标题\n        underline: true, // 下划线\n        strikethrough: true, // 中划线\n        mark: true, // 标记\n        superscript: true, // 上角标\n        subscript: true, // 下角标\n        quote: true, // 引用\n        ol: true, // 有序列表\n        ul: true, // 无序列表\n        link: true, // 链接\n        imagelink: false, // 图片链接\n        code: true, // code\n        table: true, // 表格\n        fullscreen: true, // 全屏编辑\n        readmodel: true, // 沉浸式阅读\n        htmlcode: false, // 展示html源码\n        help: false, // 帮助\n        undo: true, // 上一步\n        redo: true, // 下一步\n        trash: false, // 清空\n        save: false, // 保存（触发events中的save事件）\n        navigation: true, // 导航目录\n        alignleft: true, // 左对齐\n        aligncenter: true, // 居中\n        alignright: true, // 右对齐\n        subfield: false, // 单双栏模式\n        preview: true, // 预览\n      },\n    };\n  },\n  methods: {\n    disableSubmit() {\n      return this.setting.edit === \"\" || this.setting.view === \"\";\n    },\n\n    share() {\n      this.$alert(\n        \"http://60.205.189.66:8080/docBrowse?docId=\" + this.$route.query.docId,\n        \"复制下面的链接来分享吧\"\n      );\n    },\n\n    toEdit() {\n      this.$router.push({\n        path: \"/docEdit\",\n        query: { docId: this.$route.query.docId },\n      });\n    },\n\n    beforeUpload(file) {\n      const checkFileType =\n        file.type === \"image/jpeg\" ||\n        file.type === \"image/jpg\" ||\n        file.type === \"image/png\";\n      const checkFileSize = file.size / 1024 / 1024 < 5;\n      if (!checkFileType) {\n        this.$message.error(\"上传图片必须是 jpeg/jpg/png 格式！\");\n      }\n      if (!checkFileSize) {\n        this.$message.error(\"上传图片大小不能超过 5MB！\");\n      }\n      return checkFileType && checkFileSize;\n    },\n\n    imgAdd(pos, file) {\n      if (!this.beforeUpload(file)) {\n        return;\n      }\n      let token;\n      const policy = {};\n      const bucketName = \"domaint\";\n      const AK = \"K96MCAU7eCnSWz4XUbxIBe9Q9PUm_gBHfacmsAEf\";\n      const SK = \"g0eagx-yjztmAo0iVi-Nj8QrsCRGrKhdGKIjpVr9\";\n      const deadline = 1599840000; // 2020-09-12\n      policy.scope = bucketName;\n      policy.deadline = deadline;\n      token = genToken(AK, SK, policy);\n      let $vm = this.$refs.editor;\n\n      let form = new FormData();\n      form.append(\"file\", file);\n      form.append(\"token\", token);\n      form.append(\"key\", random(16));\n      axios.post(this.actionPath, form).then((res) => {\n        $vm.$img2Url(pos, this.photoUrl + res.data.key);\n      });\n    },\n\n    change(value, render) {\n      this.newComment = value;\n    },\n\n    commitAuth() {\n      AuthorizeFile({\n        id: this.$route.query.docId,\n        edit: this.setting.edit,\n        view: this.setting.view,\n      });\n      // this.$message(\"修改成功！\")\n      this.$router.go(0);\n    },\n\n    commitComment() {\n      console.log(\"[commitComment]\");\n      console.log(\"this.newComment:\" + this.newComment);\n      CommitComment({\n        id: this.$store.state.userId,\n        did: this.$route.query.docId,\n        content: this.newComment,\n      });\n      this.$router.go(0);\n    },\n\n    show() {\n      console.log(\"[show]\");\n      this.showSettings = !this.showSettings;\n      if (this.showSettings === true) {\n        this.setting.edit = this.setting.te;\n        this.setting.view = this.setting.tv;\n      }\n      console.log(this.showSettings);\n    },\n\n    updateSettings(value) {\n      if (value === \"2\") {\n        this.setting.view = \"1\";\n      }\n    },\n  },\n  mounted() {\n    GetAuth({\n      id: this.$store.state.userId.toString(),\n      did: this.$route.query.docId.toString(),\n    }).then((res) => {\n      if (res.data.result === false || res.data.view === false) {\n        this.$alert(\"文档不存在或无权查看\", \"出错啦\", {\n          confirmButtonText: \"确定\",\n          callback: (action) => {\n            this.$router.go(-1);\n          },\n        });\n        return;\n      }\n      this.auth.admin = res.data.admin;\n      this.auth.edit = res.data.edit;\n      if (res.data.lock === true) {\n        this.$message.warning(\n          \"此文件正在被他人编辑中，您看到的可能并不是最新内容\"\n        );\n      }\n      GetComment({ did: this.$route.query.docId.toString() }).then((res) => {\n        this.comment = res.data.comment;\n      });\n      GetFile({ id: this.$route.query.docId.toString() }).then((res) => {\n        let d = res.data;\n        if (d.result === false) {\n          this.$message.error(\"请求文档失败！请稍后再试！\");\n          return;\n        }\n        this.setting.te = res.data.edit;\n        this.setting.tv = res.data.view;\n        this.setting.edit = this.setting.te;\n        this.setting.view = this.setting.tv;\n        this.teamId = res.data.tid.toString();\n        GetUserInfo({ id: d.owner.toString() }).then((res) => {\n          this.doc.ownerName = res.data.username;\n        });\n        this.doc.createTime = d.createTime;\n        this.doc.updateTime = d.updateTime;\n        this.doc.content = d.content;\n        this.doc.docName = d.name;\n        this.doc.count = d.count;\n        console.log(this.doc);\n        this.showContent = true;\n      });\n    });\n  },\n};\n</script>\n<style>\n.tt {\n  /*margin: 1% auto;*/\n  padding: 5px 5px 5px 5px;\n  border-radius: 5px;\n  font-size: x-large;\n  font-weight: bold;\n  box-shadow: 0 0 5px #bfbfbf;\n  background-color: #e6e6e6;\n}\n\n.info {\n  /*padding: 5px 5px 5px 5px;*/\n  border-radius: 10px;\n  margin: 10px auto;\n  /*background-color: #ffffff;*/\n}\n\n.info-left {\n  float: left;\n}\n\n.info-right {\n  float: right;\n}\n\n.comment-info {\n  min-height: 50px;\n}\n\n.comment-name {\n  float: left;\n}\n.el-dialog {\n  border-radius: 20px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocBrowse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocBrowse.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DocBrowse.vue?vue&type=template&id=afab8762&\"\nimport script from \"./DocBrowse.vue?vue&type=script&lang=js&\"\nexport * from \"./DocBrowse.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DocBrowse.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocBrowse.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocBrowse.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}