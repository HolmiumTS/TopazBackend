(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d804da2"],{"1fca":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{staticClass:"teamInfo"},[a("h2",[e._v("团队信息")]),a("table",{staticStyle:{margin:"0 auto"},attrs:{border:"0",cellspacing:"20"}},[a("tr",[a("td",{attrs:{align:"left"}},[e._v("团队名称：")]),a("td",{attrs:{align:"left"}},[e._v(e._s(e.aboutTeam.teamName))])]),a("tr",[a("td",{attrs:{align:"left"}},[e._v("团队编号：")]),a("td",{attrs:{align:"left"}},[e._v(e._s(e.aboutTeam.teamId))])]),a("tr",[a("td",{attrs:{align:"left"}},[e._v("团队创建者：")]),a("td",{attrs:{align:"left"}},[a("el-link",{attrs:{underline:!1,href:e.creatorInfo.creatorUrl}},[a("el-avatar",{attrs:{src:e.creatorInfo.creatorAvatar,alt:e.creatorInfo.creatorUsername}},[e._v(e._s(e.creatorInfo.creatorUsername))]),a("span",[e._v(e._s(e.creatorInfo.creatorUsername))])],1)],1)]),a("tr",[a("td",{attrs:{align:"left"}},[e._v("团队简介：")]),a("td",{attrs:{align:"left"}},[e._v(e._s(e.aboutTeam.teamInfo))])])]),e.isCreatorOrAdmin?a("el-button",{attrs:{type:"primary",plain:"",round:""},nativeOn:{click:function(t){t.preventDefault(),e.dialogFormVisible=!0}}},[e._v("修改团队信息")]):e._e(),e.aboutTeam.creatorId==this.$store.state.userId?a("el-button",{attrs:{type:"danger",plain:"",round:""},nativeOn:{click:function(t){return t.preventDefault(),e.handleDissolve(t)}}},[e._v("解散团队")]):e._e(),e.isInTeam&&e.aboutTeam.creatorId!=this.$store.state.userId?a("el-button",{attrs:{type:"danger",plain:"",round:""},nativeOn:{click:function(t){return t.preventDefault(),e.handleQuit(t)}}},[e._v("退出团队")]):e._e(),a("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"修改团队信息",width:"50%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"changeTeamInfoForm",attrs:{model:e.changeTeamInfoForm,"label-width":"80px",rules:e.rule}},[a("el-form-item",{attrs:{label:"团队名称",prop:"teamName"}},[a("el-input",{attrs:{placeholder:"团队名称",maxlength:"20","show-word-limit":"true",autofocus:"true"},model:{value:e.changeTeamInfoForm.teamName,callback:function(t){e.$set(e.changeTeamInfoForm,"teamName",t)},expression:"changeTeamInfoForm.teamName"}})],1),a("el-form-item",{attrs:{label:"团队简介",prop:"teamInfo"}},[a("el-input",{attrs:{type:"textarea",placeholder:"团队简介",maxlength:"300",resize:"false","show-word-limit":"true",rows:"8"},model:{value:e.changeTeamInfoForm.teamInfo,callback:function(t){e.$set(e.changeTeamInfoForm,"teamInfo",t)},expression:"changeTeamInfoForm.teamInfo"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.submitting},nativeOn:{click:function(t){return t.preventDefault(),e.submitTeamInfo(t)}}},[e._v("确认")])],1)],1)],1)],1)},o=[],n=a("56d7"),m={inject:["reloadComponent"],data:function(){return{aboutTeam:{},creatorInfo:{},changeTeamInfoForm:{teamName:"",teamInfo:""},rule:{teamName:[{required:!0,message:"请输入团队名称",trigger:"blur"}],teamInfo:[{required:!0,message:"请输入团队简介",trigger:"blur"}]},dialogFormVisible:!1,isInTeam:!1,isCreatorOrAdmin:!1,submitting:!1}},methods:{handleDissolve:function(){var e=this;this.$confirm("确定要解散团队吗？这是不可逆转的操作","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:e.aboutTeam.teamId};console.log("confirm dissolve"),Object(n["DissolveTeam"])(t).then((function(t){1==t.data.result?(e.$message({type:"success",message:"成功解散团队"}),e.reloadComponent(),e.$store.dispatch("commitChangeStatus","0"),e.$router.push("/home")):e.$message.error({message:"解散团队失败，请稍后再试"})}))})).catch((function(){}))},handleQuit:function(){var e=this,t={id:this.$store.state.userId,teamId:this.aboutTeam.teamId};console.log(t.id+" quit team "+t.teamId),Object(n["QuitTeam"])(t).then((function(t){1==t.data.result?(e.$message({type:"success",message:"成功退出团队！"}),e.isInTeam=!1,e.reloadComponent(),e.$store.dispatch("commitChangeStatus","0"),e.$router.push("/home")):e.$message.error({message:"退出团队失败，请稍后再试"})}))},getCreatorUsernameAndAvatar:function(){var e=this;console.log("creatorId: "+this.aboutTeam.creatorId);var t={id:this.aboutTeam.creatorId};Object(n["GetUserInfo"])(t).then((function(t){1==t.data.result?(e.creatorInfo.creatorUrl="http://60.205.189.66:8080/userInfo?userId="+e.aboutTeam.creatorId,e.creatorInfo.creatorUsername=t.data.username,e.creatorInfo.creatorAvatar=t.data.avatar,console.log("creatorInfo.creatorAvatar: "+e.creatorInfo.creatorAvatar)):e.$message.error({message:"获取团队创建者信息失败"})}))},submitTeamInfo:function(){var e=this;this.$refs.changeTeamInfoForm.validate((function(t){if(t){var a={teamId:e.aboutTeam.teamId,teamName:e.changeTeamInfoForm.teamName,teamInfo:e.changeTeamInfoForm.teamInfo};e.submitting=!0,console.log(a),Object(n["ChangeTeamInfo"])(a).then((function(t){1==t.data.result?(e.$message({type:"success",message:"信息修改成功"}),e.aboutTeam.teamName=e.changeTeamInfoForm.teamName,e.aboutTeam.teamInfo=e.changeTeamInfoForm.teamInfo,e.submitting=!1,e.dialogFormVisible=!1,e.$router.push({path:"/team/info"})):e.$message.error({message:"修改团队信息失败"})}))}else e.$message.error({message:"请检查输入信息"})}))}},mounted:function(){var e=this;console.log(this.$store.state.teamId),Object(n["GetTeamInfo"])({teamId:this.$store.state.teamId}).then((function(t){0==t.data.result?console.log("ERROR"):(e.aboutTeam.teamName=t.data.teamName,e.aboutTeam.teamId=e.$store.state.teamId,e.aboutTeam.creatorId=t.data.creatorId,e.aboutTeam.teamInfo=t.data.teamInfo,e.changeTeamInfoForm.teamName=e.aboutTeam.teamName,e.changeTeamInfoForm.teamInfo=e.aboutTeam.teamInfo,e.getCreatorUsernameAndAvatar(),e.submitting=!1,e.dialogFormVisible=!1,Object(n["GetTeamMember"])({teamId:e.$store.state.teamId}).then((function(t){var a=e.$store.state.userId;if(!0===t.data.result)for(var r=0;r<t.data.memberInfo.length;r++){var o=t.data.memberInfo[r].memberId,n=t.data.memberInfo[r].memberType;o!=a||"0"!==n&&"1"!==n||(e.isCreatorOrAdmin=!0)}})),Object(n["GetUserTeam"])({id:e.$store.state.userId}).then((function(t){e.isInTeam=!1;for(var a=0;a<t.data.teams.length;a++)t.data.teams[a].id==e.aboutTeam.teamId&&(e.isInTeam=!0)})))}))}},s=m,i=(a("c803"),a("2877")),l=Object(i["a"])(s,r,o,!1,null,"06dfe706",null);t["default"]=l.exports},"321c":function(e,t,a){},c803:function(e,t,a){"use strict";var r=a("321c"),o=a.n(r);o.a}}]);
//# sourceMappingURL=chunk-1d804da2.55f34b29.js.map