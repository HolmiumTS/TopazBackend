(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a76360e"],{"0def":function(e,t,i){"use strict";var l=i("77e7"),s=i.n(l);s.a},"77e7":function(e,t,i){},ebe5:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-main",[i("table",{staticStyle:{margin:"-20px"},attrs:{cellspacing:"20"}},e._l(e.displayFiles,(function(t){return i("tr",{key:t[0].id},e._l(t,(function(t){return i("td",{key:t.id},[i("el-card",{staticClass:"cardFile",attrs:{dFile:t,shadow:"always"}},[i("el-row",{staticClass:"cardRow"},[i("el-col",{staticStyle:{margin:"0% 10%"},attrs:{span:1}},[i("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.fileIcon}})],1),i("el-col",{staticStyle:{margin:"px"},attrs:{span:13}},[i("div",{staticStyle:{"font-size":"100%",margin:"0px 0px 5px 0px"},attrs:{align:"left"}},[e._v(e._s(t.name))]),i("div",{staticStyle:{"font-size":"60%",margin:"0px 0px 5px 0px"},attrs:{align:"left"}},[e._v(e._s("创建者: "+t.username))]),i("div",{staticStyle:{"font-size":"50%",color:"#B3B3B3",margin:"0px 0px 5px 0px"},attrs:{align:"left"}},[e._v(e._s("最后编辑于: "+t.time))])]),i("el-col",{attrs:{span:1}},["已收藏"==t.collected?i("i",{staticClass:"el-icon-star-on"}):e._e(),"已收藏"!=t.collected?i("i",{staticClass:"el-icon-collection-tag",staticStyle:{color:"rgba(255,255,255,0)"}}):e._e()]),i("el-col",{attrs:{span:1,offset:1}},[i("el-dropdown",{attrs:{placement:"bottom-end"}},[i("i",{staticClass:"el-icon-more"}),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(i){return i.preventDefault(),e.browseFile(t.id)}}},[i("i",{staticClass:"el-icon-search"}),i("span",[e._v("浏览")])]),i("el-dropdown-item",{nativeOn:{click:function(i){return i.preventDefault(),e.collectFile(t.id)}}},[i("i",{class:"已收藏"==t.collected?"el-icon-star-on":"el-icon-star-off"}),"已收藏"==t.collected?i("span",[e._v("已收藏")]):e._e(),"已收藏"!=t.collected?i("span",[e._v("收藏")]):e._e()]),e.cheakOwnerAuth(t)?i("el-dropdown-item",{nativeOn:{click:function(i){return i.preventDefault(),e.ShowAuthorizeDialog(t.id)}}},[i("i",{staticClass:"el-icon-s-tools"}),i("span",[e._v("管理权限")])]):e._e(),e.cheakOwnerAuth(t)?i("el-dropdown-item",{nativeOn:{click:function(i){return i.preventDefault(),e.templateFile(t.id)}}},[i("i",{staticClass:"el-icon-s-tools",staticStyle:{color:"rgba(255,255,255,0)"}}),i("span",[e._v("存为模板")])]):e._e(),e.cheakOwnerAuth(t)?i("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(i){return i.preventDefault(),e.deleteFile(t.id)}}},[i("i",{staticClass:"el-icon-star-off",staticStyle:{color:"rgba(255,255,255,0)"}}),i("span",[e._v("删除")])]):e._e()],1)],1)],1)],1)],1)],1)})),0)})),0),e.files.length<1?i("div",{staticStyle:{margin:"20% auto"}},[i("div",{staticStyle:{"font-size":"500%",color:"#999999"}},[e._v("無")]),i("div",{staticStyle:{"font-size":"80%",color:"#999999"}},[e._v("没有文件")])]):e._e(),i("el-dialog",{attrs:{visible:e.showAuthorizeDialog,title:"管理文档权限",width:"400px"},on:{"update:visible":function(t){e.showAuthorizeDialog=t}}},[i("p",{attrs:{align:"left"}},[i("span",[i("h4",[e._v("浏览:")])]),i("el-radio-group",{model:{value:e.viewAuth,callback:function(t){e.viewAuth=t},expression:"viewAuth"}},["-1"==e.selectFileTeam?i("el-radio",{attrs:{label:"0"}},[e._v("仅创建者")]):e._e(),"-1"!=e.selectFileTeam?i("el-radio",{attrs:{label:"0"}},[e._v("文档所在团队成员")]):e._e(),i("el-radio",{attrs:{label:"1"}},[e._v("所有人")])],1)],1),i("p",{attrs:{align:"left"}},[i("span",[i("h4",[e._v("编辑:")])]),i("el-radio-group",{model:{value:e.editAuth,callback:function(t){e.editAuth=t},expression:"editAuth"}},[i("el-radio",{attrs:{label:"0",disabled:e.editAuthCheck("0")}},[e._v("仅创建者")]),i("el-radio",{attrs:{label:"1",disabled:e.editAuthCheck("1")}},[e._v("文档所在团队成员")]),i("el-radio",{attrs:{label:"2",disabled:e.editAuthCheck("2")}},[e._v("所有人")])],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.authorizeFile(t)}}},[e._v("确认")])],1)])],1)},s=[],a=i("56d7"),o={data:function(){return{fileIcon:"http://qexiy12gt.hd-bkt.clouddn.com/%E6%96%87%E6%A1%A3%E5%9B%BE%E6%A0%87.png",rowWidth:3,showAuthorizeDialog:!1,viewAuth:null,editAuth:null,selectFileId:null,selectFileTeam:null,displayFiles:[],files:[]}},computed:{},methods:{cheakOwnerAuth:function(e){return e.owner==this.$store.state.userId},editAuthCheck:function(e){if("-1"==this.selectFileTeam){if("0"==this.viewAuth&&"0"!=e)return this.editAuth="0",!0}else if("0"==this.viewAuth&&"2"==e)return"2"==this.editAuth&&(this.editAuth="1"),!0;return!1},collectFile:function(e){var t=this;Object(a["CollectFile"])({userId:this.$store.state.userId,fileId:e}).then((function(i){1==i.data.result?(console.log("collectFile_Succeed: "+e),t.$message({type:"success",message:"收藏成功"}),t.$router.go(0)):(console.log("collectFile_Failed: "+e),t.$message.error({message:"收藏失败"}))}))},browseFile:function(e){this.$router.push({path:"/docBrowse",query:{docId:e}})},ShowAuthorizeDialog:function(e){for(var t=0;t<this.files.length;t++)this.files[t].id==e&&(this.viewAuth=this.files[t].view,this.editAuth=this.files[t].edit,this.selectFileTeam=this.files[t].team,this.selectFileId=this.files[t].id);this.showAuthorizeDialog=!0},authorizeFile:function(e){var t=this,i={id:this.selectFileId,view:this.viewAuth,edit:this.editAuth};Object(a["AuthorizeFile"])(i).then((function(e){1==e.data.result?(console.log("authFile_Succeed: "+i),t.$message({type:"success",message:"修改成功"}),t.$router.go(0)):(console.log("authFile_Failed: "+i),t.$message.error({message:"收藏失败"}))}))},templateFile:function(e){var t=this;Object(a["TemplateFile"])({userId:this.$store.state.userId,fileId:e}).then((function(i){1==i.data.result?(console.log("templateFile_Succeed: "+e),t.$message({type:"success",message:"模板保存成功"}),t.$router.go(0)):(console.log("templateFile_Failed: "+e),t.$message.error({message:"模板保存失败"}))}))},deleteFile:function(e){var t=this;Object(a["DeleteFile"])({userId:this.$store.state.userId,fileId:e}).then((function(i){1==i.data.result?(console.log("deleteFile_Succeed: "+e),t.$message({type:"success",message:"删除成功"}),t.$router.go(0)):(console.log("deleteFile_Failed: "+e),t.$message.error({message:"删除失败"}))}))}},mounted:function(){var e=this;Object(a["GetRecentFile"])({id:this.$store.state.userId}).then((function(t){e.files=t.data.files;for(var i=0;i<e.files.length;){e.$set(e.displayFiles,parseInt(i/e.rowWidth),[]);for(var l=0;l<e.rowWidth&&i<e.files.length;l++)e.$set(e.displayFiles[parseInt(i/e.rowWidth)],l,e.files[i]),i++}})),console.log("displayFiles"),console.log(this.displayFiles)}},n=o,r=(i("0def"),i("2877")),c=Object(r["a"])(n,l,s,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2a76360e.31b37f4a.js.map