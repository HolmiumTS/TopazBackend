(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-739b3061"],{1669:function(e,t,r){"use strict";var s=r("4f3d"),a=r.n(s);a.a},"4f3d":function(e,t,r){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var s=r("1d80"),a=r("5899"),n="["+a+"]",o=RegExp("^"+n+n+"*"),i=RegExp(n+n+"*$"),l=function(e){return function(t){var r=String(s(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(i,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5e89":function(e,t,r){var s=r("861d"),a=Math.floor;e.exports=function(e){return!s(e)&&isFinite(e)&&a(e)===e}},7156:function(e,t,r){var s=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var n,o;return a&&"function"==typeof(n=t.constructor)&&n!==r&&s(o=n.prototype)&&o!==r.prototype&&a(e,o),e}},"8ba4":function(e,t,r){var s=r("23e7"),a=r("5e89");s({target:"Number",stat:!0},{isInteger:a})},a434:function(e,t,r){"use strict";var s=r("23e7"),a=r("23cb"),n=r("a691"),o=r("50c4"),i=r("7b0b"),l=r("65f0"),u=r("8418"),c=r("1dde"),d=r("ae40"),f=c("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var r,s,c,d,f,m,b=i(this),I=o(b.length),w=a(e,I),U=arguments.length;if(0===U?r=s=0:1===U?(r=0,s=I-w):(r=U-2,s=g(p(n(t),0),I-w)),I+r-s>h)throw TypeError(v);for(c=l(b,s),d=0;d<s;d++)f=w+d,f in b&&u(c,d,b[f]);if(c.length=s,r<s){for(d=w;d<I-s;d++)f=d+s,m=d+r,f in b?b[m]=b[f]:delete b[m];for(d=I;d>I-s+r;d--)delete b[d-1]}else if(r>s)for(d=I-s;d>w;d--)f=d+s-1,m=d+r-1,f in b?b[m]=b[f]:delete b[m];for(d=0;d<r;d++)b[d+w]=arguments[d+2];return b.length=I-s+r,c}})},a640:function(e,t,r){"use strict";var s=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&s((function(){r.call(null,t||function(){throw 1},1)}))}},a9e3:function(e,t,r){"use strict";var s=r("83ab"),a=r("da84"),n=r("94ca"),o=r("6eeb"),i=r("5135"),l=r("c6b6"),u=r("7156"),c=r("c04e"),d=r("d039"),f=r("7c73"),m=r("241c").f,p=r("06cf").f,g=r("9bf2").f,h=r("58a8").trim,v="Number",b=a[v],I=b.prototype,w=l(f(I))==v,U=function(e){var t,r,s,a,n,o,i,l,u=c(e,!1);if("string"==typeof u&&u.length>2)if(u=h(u),t=u.charCodeAt(0),43===t||45===t){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+u}for(n=u.slice(2),o=n.length,i=0;i<o;i++)if(l=n.charCodeAt(i),l<48||l>a)return NaN;return parseInt(n,s)}return+u};if(n(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var y,F=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof F&&(w?d((function(){I.valueOf.call(r)})):l(r)!=v)?u(new b(U(t)),r,F):U(t)},x=s?m(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;x.length>O;O++)i(b,y=x[O])&&!i(F,y)&&g(F,y,p(b,y));F.prototype=I,I.constructor=F,o(a,v,F)}},baa5:function(e,t,r){var s=r("23e7"),a=r("e58c");s({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},c975:function(e,t,r){"use strict";var s=r("23e7"),a=r("4d64").indexOf,n=r("a640"),o=r("ae40"),i=[].indexOf,l=!!i&&1/[1].indexOf(1,-0)<0,u=n("indexOf"),c=o("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:l||!u||!c},{indexOf:function(e){return l?i.apply(this,arguments)||0:a(this,e,arguments.length>1?arguments[1]:void 0)}})},e58c:function(e,t,r){"use strict";var s=r("fc6a"),a=r("a691"),n=r("50c4"),o=r("a640"),i=r("ae40"),l=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),f=i("indexOf",{ACCESSORS:!0,1:0}),m=c||!d||!f;e.exports=m?function(e){if(c)return u.apply(this,arguments)||0;var t=s(this),r=n(t.length),o=r-1;for(arguments.length>1&&(o=l(o,a(arguments[1]))),o<0&&(o=r+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:u},ee96:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-header",[r("el-page-header",{attrs:{content:"用户信息"},on:{back:e.goBack}})],1),r("el-main",{staticClass:"userinfo"},[r("el-container",[r("el-aside",{staticStyle:{width:"200px"}},[r("el-avatar",{staticStyle:{margin:"50% 20%"},attrs:{src:e.ava,size:100,fit:"fill"}},[e._v(e._s(this.$store.state.username))]),this.$store.state.userId==this.userId?r("p",{staticStyle:{margin:"-16% 22%"}},[r("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.dis2=!0}}},[e._v("修改头像")])],1):e._e()],1),r("div",{staticClass:"tableTitle"},[r("span",{staticClass:"midText"})]),r("el-main",[r("h3",[e._v("用户信息")]),r("table",{staticStyle:{margin:"0 auto"},attrs:{border:"0",cellspacing:"30",width:"400"}},[r("tr",[r("td",[e._v("昵称:")]),r("td",{attrs:{align:"left"}},[e._v(e._s(e.userInfo.username))])]),r("tr",[r("td",[e._v("手机:")]),r("td",{attrs:{align:"left"}},[e._v(e._s(e.userInfo.tel))])]),r("tr",[r("td",[e._v("邮箱:")]),r("td",{attrs:{align:"left"}},[e._v(e._s(e.userInfo.email))])])]),this.$store.state.userId==this.userId?r("span",[r("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.dis0=!0}}},[e._v("修改个人信息")]),r("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.dis1=!0}}},[e._v("修改密码")])],1):e._e()])],1),r("el-dialog",{attrs:{visible:e.dis0,title:"修改个人信息",width:"30%"},on:{"update:visible":function(t){e.dis0=t}}},[r("el-form",{ref:"changeUserInfoForm",attrs:{model:e.changeUserInfoForm,rules:e.rule0,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"手机",prop:"tel"}},[r("el-input",{attrs:{placeholder:"手机"},model:{value:e.changeUserInfoForm.tel,callback:function(t){e.$set(e.changeUserInfoForm,"tel",e._n(t))},expression:"changeUserInfoForm.tel"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.changeUserInfoForm.email,callback:function(t){e.$set(e.changeUserInfoForm,"email",t)},expression:"changeUserInfoForm.email"}})],1),r("el-form-item",{attrs:{label:"昵称",prop:"username"}},[r("el-input",{attrs:{placeholder:"昵称"},model:{value:e.changeUserInfoForm.username,callback:function(t){e.$set(e.changeUserInfoForm,"username",t)},expression:"changeUserInfoForm.username"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.submitting0},nativeOn:{click:function(t){return t.preventDefault(),e.submit0(t)}}},[e._v("确认")])],1)],1),r("el-dialog",{attrs:{visible:e.dis1,title:"修改密码",width:"30%"},on:{"update:visible":function(t){e.dis1=t}}},[r("el-form",{ref:"changeUserPasswordForm",staticClass:"changeform",attrs:{model:e.changeUserPasswordForm,rules:e.rule1,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"旧密码",prop:"passwordOld"}},[r("el-input",{attrs:{type:"password",placeholder:"旧密码"},model:{value:e.changeUserPasswordForm.passwordOld,callback:function(t){e.$set(e.changeUserPasswordForm,"passwordOld",t)},expression:"changeUserPasswordForm.passwordOld"}})],1),r("el-form-item",{attrs:{label:"新密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"新密码"},model:{value:e.changeUserPasswordForm.password,callback:function(t){e.$set(e.changeUserPasswordForm,"password",t)},expression:"changeUserPasswordForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"confirmpassword"}},[r("el-input",{attrs:{placeholder:"确认密码"},model:{value:e.changeUserPasswordForm.confirmpassword,callback:function(t){e.$set(e.changeUserPasswordForm,"confirmpassword",t)},expression:"changeUserPasswordForm.confirmpassword"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.submitting1},nativeOn:{click:function(t){return t.preventDefault(),e.submit1(t)}}},[e._v("确认")])],1)],1),r("el-dialog",{attrs:{visible:e.dis2,title:"上传头像",width:"30%"},on:{"update:visible":function(t){e.dis2=t}}},[r("el-upload",{attrs:{multiple:!1,"list-type":"picture-card","on-remove":e.handleRemove,action:e.actionPath,accept:"image/jpeg, image/png, image/jpg","before-upload":e.beforeUpload,data:e.postData,"file-list":e.avatar,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,limit:1}},[r("i",{staticClass:"el-icon-plus"})]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.submitting2},nativeOn:{click:function(t){return t.preventDefault(),e.submit2(t)}}},[e._v("确认")])],1)],1)],1)],1)},a=[],n=(r("c975"),r("baa5"),r("a434"),r("a9e3"),r("8ba4"),r("d3b7"),r("25f0"),r("56d7")),o=r("1105"),i=r("381a"),l=r.n(i),u={components:{},data:function(){var e=this,t=function(t,r,s){return""===r?s(new Error("确认密码不能为空")):r!==e.changeUserPasswordForm.password?s(new Error("密码不一致")):s()},r=function(e,t,r){return""===t||void 0==t?r(new Error("手机号不能为空")):Number.isInteger(t)&&11===t.toString().length?void r():r(new Error("手机号格式错误"))};return{actionPath:"https://upload.qiniup.com",photoUrl:"http://qexiy12gt.hd-bkt.clouddn.com/",dis0:!1,dis1:!1,dis2:!1,submitting0:!1,submitting1:!1,submitting2:!1,rule1:{passwordOld:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],password:[{required:!0,min:6,message:"新密码不能为空,长度最少6位",trigger:"blur"}],confirmpassword:[{required:!0,validator:t,trigger:"blur"}]},rule0:{tel:[{required:!0,validator:r,trigger:"blur"}],email:[{required:!0,type:"email",message:"邮箱格式有误",trigger:"blur"}],username:[{required:!0,message:"昵称不能为空",trigger:"blur"}]},userId:"",avatar:[],postData:{token:"",key:""},userInfo:{username:"",tel:null,email:"",avatar:""},changeUserInfoForm:{username:"",tel:null,email:""},changeUserPasswordForm:{passwordOld:"",password:"",confirmpassword:""}}},methods:{submit0:function(){var e=this;this.$refs.changeUserInfoForm.validate((function(t){if(t){e.submitting0=!0;var r=e.changeUserInfoForm;r.id=e.userId,r.tel=r.tel.toString(),Object(n["ChangeUserInfo"])(r).then((function(t){1==t.data.result?(e.$message({type:"success",message:"信息修改成功"}),e.submitting0=!1,e.userInfo.username=e.changeUserInfoForm.username,e.userInfo.tel=e.changeUserInfoForm.tel,e.userInfo.email=e.changeUserInfoForm.email,e.$store.dispatch("commitLogin",{userId:e.userId,username:e.changeUserInfoForm.username,avatar:e.userInfo.avatar}),e.dis0=!1,e.$router.push({path:"/userInfo",query:{userId:e.$store.state.userId}})):(e.submitting0=!1,e.$message.error({message:"信息修改失败,请稍后再试"}))}))}else e.$message.error({message:"请检查输入信息"})}))},submit1:function(){var e=this;this.$refs.changeUserPasswordForm.validate((function(t){if(t){e.submitting1=!0;var r={id:e.userId,oldPassword:e.changeUserPasswordForm.passwordOld,newPassword:e.changeUserPasswordForm.password};Object(n["ChangeUserPassword"])(r).then((function(t){1==t.data.result?(e.$message({type:"success",message:"密码修改成功"}),e.submitting1=!1,e.dis1=!1,e.$router.push({path:"/userInfo",query:{userId:e.$store.state.userId}})):(e.submitting1=!1,e.$message.error({message:"旧密码错误"}))}))}else e.$message.error({message:"请检查输入信息"})}))},submit2:function(){var e=this;1==this.avatar.length?(this.submitting2=!0,Object(n["ChangeUserAvatar"])({id:this.$store.state.userId,avatar:this.avatar[0]}).then((function(t){1==t.data.result?(e.submitting2=!1,e.$message({type:"success",message:"头像修改成功"}),e.$store.dispatch("commitLogin",{userId:e.userId,username:e.$store.state.username,avatar:e.avatar[0]}),e.dis2=!1,e.$router.go(0)):(e.submitting2=!1,e.$message.error("修改头像失败, 请稍后再试"))}))):this.$message.error("请上传新头像")},goBack:function(){this.$router.go(-1)},isMyself:function(){return this.$store.state.userId==this.userId},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/jpg"===e.type||"image/png"===e.type,r=e.size/1024/1024<5;return t||this.$message.error("上传图片必须是 jpeg/jpg/png 格式！"),r||this.$message.error("上传图片大小不能超过 5MB！"),t&&r&&(this.postData.key=l()(16)),t&&r},handleSuccess:function(e){this.avatar.push(this.photoUrl+e.key),console.log(this.avatar)},handleRemove:function(e){if(Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)},e.url){var t=e.url.substr(e.url.lastIndexOf("/"));this.avatar.remove(t),this.avatar.length||(this.hasFmt=!1,this.$refs.image.validate())}e.response.key&&this.avatar.remove(this.photoUrl+e.response.key)},handleExceed:function(){this.$message.warning("最多上传 1 张头像")}},computed:{ava:function(){return this.userInfo.avatar}},created:function(){var e,t={},r="domaint",s="K96MCAU7eCnSWz4XUbxIBe9Q9PUm_gBHfacmsAEf",a="g0eagx-yjztmAo0iVi-Nj8QrsCRGrKhdGKIjpVr9",n=159984e4;t.scope=r,t.deadline=n,e=Object(o["a"])(s,a,t),this.postData.token=e,console.log("token = "+e)},mounted:function(){var e=this;Object(n["GetUserInfo"])({id:this.$route.query.userId}).then((function(t){e.userId=e.$route.query.userId,e.userInfo.username=t.data.username,e.userInfo.tel=parseInt(t.data.tel),e.userInfo.email=t.data.email,e.userInfo.avatar=t.data.avatar,e.changeUserInfoForm.username=t.data.username,e.changeUserInfoForm.tel=parseInt(t.data.tel),e.changeUserInfoForm.email=t.data.email}))}},c=u,d=(r("1669"),r("2877")),f=Object(d["a"])(c,s,a,!1,null,"f5f0c89e",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-739b3061.6b4e44e0.js.map